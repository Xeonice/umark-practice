webpackJsonp([1],{dtwL:function(t,a){},iXgl:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("O534"),n=e("lFKW"),i={props:{ow:{type:[Number,String],default:400},oh:{type:[Number,String],default:300},fillColor:{type:String,default:"#000"},placement:{type:String,default:"请点击打开摄像头"},maxView:{type:Number,default:10}},data:function(){return{cameraon:!1,videoEl:null,msg:this.placement,canvasGroup:[]}},computed:{style:function(){return{width:this.ow+"px",height:this.oh+"px","background-color":this.fillColor}}},mounted:function(){this.videoEl=this.$el.querySelector("video"),this.canvasEl=this.$el.querySelector("canvas"),this.context=this.canvasEl.getContext("2d")},methods:{cameraOn:function(){var t=this;n(function(a,e){a?(console.log(a),t.msg=a.name,t.$emit("error",a)):(t.cameraon=!0,t.stream=e,void 0!==t.videoEl.mozSrcObject?t.videoEl.mozSrcObject=e:void 0!==t.videoEl.srcObject?t.videoEl.srcObject=e:t.videoEl.src=e)})},cameraOff:function(){this.stream&&(this.cameraon=!1,this.msg=this.placement,this.context.fillStyle="#000",this.context.fillRect(0,0,this.ow,this.oh),this.stream.getVideoTracks()[0].stop(),this.canvasGroup=[])},previewCanvas:function(t){return this.context.fillStyle="#000",this.context.fillRect(0,0,this.ow,this.oh),this.context.drawImage(t.target||t,0,0,this.ow,this.oh),this.canvasEl.toDataURL()},toCanvas:function(){var t=this.previewCanvas(this.videoEl);this.$emit("takeshot",t),0!=this.maxView&&(this.canvasGroup.length+1>this.maxView&&this.canvasGroup.pop(),this.canvasGroup.unshift(this.canvasEl.toDataURL()))}}},c={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"camera-outer"},[e("div",{staticClass:"camera-main",style:t.style},[e("div",{staticClass:"camera-control"},[e("button",{directives:[{name:"show",rawName:"v-show",value:!t.cameraon,expression:"!cameraon"}],staticClass:"camera-btn",on:{click:t.cameraOn}},[t._v("打开摄像头")]),t._v(" "),t.cameraon?e("button",{staticClass:"camera-btn",on:{click:t.cameraOff}},[t._v("关闭摄像头")]):t._e(),t._v(" "),t.cameraon?e("button",{staticClass:"camera-btn",on:{click:function(a){t.toCanvas("video")}}},[t._v("生成Canvas")]):t._e()]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.cameraon,expression:"!cameraon"}],staticClass:"camera-placement",attrs:{slot:"placement"},on:{click:t.cameraOn},slot:"placement"},[e("p",{staticClass:"camera-placement-inner"},[t._v("\n        "+t._s(t.msg)+"\n      ")])]),t._v(" "),e("video",{directives:[{name:"show",rawName:"v-show",value:t.cameraon,expression:"cameraon"}],staticClass:"camera-video",style:t.style})]),t._v(" "),e("div",{staticClass:"canvas-main",style:t.style},[e("canvas",{staticClass:"camera-canvas",style:t.style,attrs:{width:t.ow,height:t.oh}}),t._v(" "),e("div",{staticClass:"camera-canvas-group"},t._l(t.canvasGroup,function(a){return e("div",{staticClass:"camera-canvas-item",on:{click:t.previewCanvas}},[e("img",{attrs:{src:a}})])}))])])},staticRenderFns:[]};var o={name:"app",components:{Camera:e("ngHh")(i,c,!1,function(t){e("dtwL")},"data-v-cf4f2676",null).exports}},r={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{attrs:{id:"app"}},[a("Camera")],1)},staticRenderFns:[]};var l=e("ngHh")(o,r,!1,function(t){e("r8Ae")},null,null).exports;s.a.config.productionTip=!1,new s.a({el:"#app",template:"<App/>",components:{App:l}})},r8Ae:function(t,a){}},["iXgl"]);
//# sourceMappingURL=app.9bf36f53a031d26684f2.js.map