{"version":3,"sources":["webpack:///src/camera.vue","webpack:///./src/camera.vue?ba74","webpack:///./src/camera.vue","webpack:///demo/App.vue","webpack:///./demo/App.vue?bd47","webpack:///./demo/App.vue","webpack:///./demo/main.js"],"names":["getUserMedia","__webpack_require__","camera","String","Number","placement","fillColor","_this","this","err","name","stream","oh","stop","toDataURL","videoEl","dataUrl","pop","selectortype_template_index_0_src_camera","render","_vm","_h","$createElement","_c","_self","staticClass","style","directives","rawName","value","cameraon","expression","on","click","cameraOn","_v","cameraOff","_e","$event","toCanvas","attrs","slot","_s","msg","width","ow","height","_l","item","previewCanvas","src","staticRenderFns","App","Camera","normalizeComponent","ssrContext","selectortype_template_index_0_demo_App","id","demo_App","App_normalizeComponent","vue_esm","config","productionTip","el","template","components"],"mappings":"0IAyBAA,EAAAC,EAAA,QACAC,2BAIAC,gBAEA,sBAEAA,gBAEA,qBAEAA,eAEA,wBAEAA,eAEA,0BAEAC,eAGA,sCAGA,UACA,cACAC,4HAMAC,oEAIA,8CACA,gDACA,oCAGA,IAAAC,EAAAC,oCAGAC,WACAC,qBACAD,iBAEA,WACAE,yDAEAA,mDAEAA,gBAEAA,wDAOA,gBACAN,iCACA,8CACAO,oCACAC,qFAKA,8CACAD,wDACAA,kBACAE,+DAGAC,+BACAC,8EAKAC,6CAEAH,iBC9GAI,GADiBC,OAFjB,WAA0B,IAAAC,EAAAZ,KAAaa,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,iBAA2BF,EAAA,OAAYE,YAAA,cAAAC,MAAAN,EAAA,QAA4CG,EAAA,OAAYE,YAAA,mBAA6BF,EAAA,UAAeI,aAAajB,KAAA,OAAAkB,QAAA,SAAAC,OAAAT,EAAAU,SAAAC,WAAA,cAA0EN,YAAA,aAAAO,IAA+BC,MAAAb,EAAAc,YAAsBd,EAAAe,GAAA,WAAAf,EAAAe,GAAA,KAAAf,EAAA,SAAAG,EAAA,UAA4DE,YAAA,aAAAO,IAA6BC,MAAAb,EAAAgB,aAAuBhB,EAAAe,GAAA,WAAAf,EAAAiB,KAAAjB,EAAAe,GAAA,KAAAf,EAAA,SAAAG,EAAA,UAAqEE,YAAA,aAAAO,IAA6BC,MAAA,SAAAK,GAAyBlB,EAAAmB,SAAA,aAAwBnB,EAAAe,GAAA,cAAAf,EAAAiB,OAAAjB,EAAAe,GAAA,KAAAZ,EAAA,OAAwDI,aAAajB,KAAA,OAAAkB,QAAA,SAAAC,OAAAT,EAAAU,SAAAC,WAAA,cAA0EN,YAAA,mBAAAe,OAAwCC,KAAA,aAAmBT,IAAKC,MAAAb,EAAAc,UAAqBO,KAAA,cAAkBlB,EAAA,KAAUE,YAAA,2BAAqCL,EAAAe,GAAA,aAAAf,EAAAsB,GAAAtB,EAAAuB,KAAA,gBAAAvB,EAAAe,GAAA,KAAAZ,EAAA,SAA8EI,aAAajB,KAAA,OAAAkB,QAAA,SAAAC,MAAAT,EAAA,SAAAW,WAAA,aAAwEN,YAAA,eAAAC,MAAAN,EAAA,UAA+CA,EAAAe,GAAA,KAAAZ,EAAA,OAA0BE,YAAA,cAAAC,MAAAN,EAAA,QAA4CG,EAAA,UAAeE,YAAA,gBAAAC,MAAAN,EAAA,MAAAoB,OAAqDI,MAAAxB,EAAAyB,GAAAC,OAAA1B,EAAAR,MAAgCQ,EAAAe,GAAA,KAAAZ,EAAA,OAAwBE,YAAA,uBAAkCL,EAAA2B,GAAA3B,EAAA,qBAAA4B,GAAyC,OAAAzB,EAAA,OAAiBE,YAAA,qBAAAO,IAAqCC,MAAAb,EAAA6B,iBAA2B1B,EAAA,OAAYiB,OAAOU,IAAAF,eAE39CG,oBCCjB,ICKAC,QAEA,kBAGAC,ODVApD,EAAA,OAcAqD,CACApD,EACAgB,GATA,EAVA,SAAAqC,GACAtD,EAAA,SAaA,kBAEA,MAUA,UEvBAuD,GADiBrC,OAFjB,WAA0B,IAAaE,EAAbb,KAAac,eAA0BC,EAAvCf,KAAuCgB,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBiB,OAAOiB,GAAA,SAAYlC,EAAA,eAE5G4B,oBCCjB,IAuBAO,EAvBAzD,EAAA,OAcA0D,CACAP,EACAI,GATA,EAVA,SAAAD,GACAtD,EAAA,SAaA,KAEA,MAUA,QCrBA2D,EAAA,EAAAC,OAAAC,eAAA,EAGA,IAAAF,EAAA,GACAG,GAAA,OACAC,SAAA,SACAC,YAAeb,IAAAM","file":"static/js/app.9bf36f53a031d26684f2.js","sourcesContent":["<template>\n  <div class=\"camera-outer\">\n    <div class=\"camera-main\" :style=\"style\">\n      <div class=\"camera-control\">\n        <button class=\"camera-btn\" @click=\"cameraOn\" v-show=\"!cameraon\">打开摄像头</button>\n        <button class=\"camera-btn\" @click=\"cameraOff\" v-if=\"cameraon\">关闭摄像头</button>\n        <button class=\"camera-btn\" @click=\"toCanvas('video')\" v-if=\"cameraon\">生成Canvas</button>\n      </div>\n      <div class=\"camera-placement\" @click=\"cameraOn\" slot=\"placement\" v-show=\"!cameraon\">\n        <p class=\"camera-placement-inner\">\n          {{msg}}\n        </p>\n      </div>\n      <video class=\"camera-video\" v-show=\"cameraon\" :style=\"style\"></video>\n    </div>\n    <div class=\"canvas-main\" :style=\"style\">\n      <canvas class=\"camera-canvas\" :width=\"ow\" :height=\"oh\" :style=\"style\"></canvas>\n      <div class=\"camera-canvas-group\">\n        <div class=\"camera-canvas-item\" v-for=\"item in canvasGroup\" @click=\"previewCanvas\">\n          <img :src=\"item\" />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nvar getUserMedia = require('getusermedia');\nexport default {\n  props: {\n    ow: {\n      type: [Number, String],\n      default: 400\n    },\n    oh: {\n      type: [Number, String],\n      default: 300\n    },\n    fillColor: {\n      type: String,\n      default: '#000'\n    },\n    placement: {\n      type: String,\n      default: '请点击打开摄像头'\n    },\n    maxView: {\n      type: Number,\n      default: 10\n    }\n  },\n  data() {\n    return {\n      cameraon: false,\n      videoEl: null,\n      msg: this.placement,\n      canvasGroup: [],\n    }\n  },\n  computed: {\n    style() {\n      return { 'width': `${this.ow}px`, height: `${this.oh}px`, 'background-color': this.fillColor }\n    }\n  },\n  mounted() {\n    this.videoEl = this.$el.querySelector('video');\n    this.canvasEl = this.$el.querySelector('canvas');\n    this.context = this.canvasEl.getContext('2d');\n  },\n  methods: {\n    cameraOn() {\n      getUserMedia((err, stream) => {\n        if (err) {\n          console.log(err)\n          this.msg = err.name;\n          this.$emit('error', err);\n        } else {\n          this.cameraon = true;\n          this.stream = stream;\n          if (this.videoEl.mozSrcObject !== undefined) { // FF18a\n            this.videoEl.mozSrcObject = stream;\n          } else if (this.videoEl.srcObject !== undefined) {\n            this.videoEl.srcObject = stream;\n          } else { // FF16a, 17a\n            this.videoEl.src = stream;\n          }\n        }\n      });\n    },\n    cameraOff() {\n      if (this.stream) {\n        this.cameraon = false;\n        this.msg = this.placement;\n        this.context.fillStyle = \"#000\";\n        this.context.fillRect(0, 0, this.ow, this.oh);\n        this.stream.getVideoTracks()[0].stop();\n        this.canvasGroup = [];\n      }\n    },\n    previewCanvas(el) {\n      this.context.fillStyle = \"#000\";\n      this.context.fillRect(0, 0, this.ow, this.oh);\n      this.context.drawImage(el.target || el, 0, 0, this.ow, this.oh);\n      return this.canvasEl.toDataURL();\n    },\n    toCanvas() {\n      const dataUrl = this.previewCanvas(this.videoEl);\n      this.$emit('takeshot', dataUrl)\n      if (this.maxView == 0) {\n        return;\n      }\n      if (this.canvasGroup.length + 1 > this.maxView) {\n        this.canvasGroup.pop();\n      }\n      this.canvasGroup.unshift(this.canvasEl.toDataURL());\n    }\n\n  }\n}\n\n</script>\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.camera-main {\n  margin-right: 2px;\n}\n\n.camera-main,\n.canvas-main {\n  position: relative;\n  float: left;\n}\n\n.camera-main video,\n.camera-main .camera-placement {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 1;\n}\n\n.camera-placement {\n  display: table;\n}\n\n.camera-placement-inner {\n  display: table-cell;\n  color: #fff;\n  font-size: 18px;\n  vertical-align: middle;\n}\n\n.camera-control {\n  position: absolute;\n  z-index: 10;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  text-align: center;\n  padding: 10px;\n  min-height: 40px;\n}\n\n.camera-main:after {\n  position: absolute;\n  content: '';\n  display: block;\n  width: 100%;\n  height: 50%;\n  z-index: 9;\n  left: 0;\n  bottom: 0;\n  max-height: 100px;\n  background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.8));\n}\n\n.camera-btn {\n  cursor: pointer;\n  border: none;\n  color: #fff;\n  padding: 8px 12px;\n  font-size: 14px;\n  outline: none;\n  background-color: rgba(255, 255, 255, 0.3);\n  transition: all 0.3s;\n  border: none;\n  box-shadow: 0 2px 0 0 rgba(45, 140, 240, 0.8);\n  margin: 0 5px;\n}\n\n.camera-btn:hover {\n  background-color: rgba(45, 140, 240, 0.6);\n  box-shadow: 0 2px 0 0 rgba(45, 140, 240, 1);\n}\n\n.camera-btn:active {\n  background-color: rgba(45, 140, 240, 0.2);\n}\n\n.camera-canvas-group {\n  display: flex;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n\n.camera-canvas-item {\n  cursor: pointer;\n  opacity: 0.8;\n  flex: 1;\n  max-width: 100px;\n  height: 100%;\n  overflow: hidden;\n  clear: both;\n  margin-bottom: -1px;\n  transition: all 0.2s;\n}\n\n.camera-canvas-item img {\n  float: left;\n  width: 100%;\n  background-color: #000;\n  border: 1px solid #fff;\n}\n\n.camera-canvas-item:hover {\n  position: relative;\n  opacity: 1;\n  position: relative;\n  box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.8);\n}\n\n.camera-canvas-item:hover {}\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/camera.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"camera-outer\"},[_c('div',{staticClass:\"camera-main\",style:(_vm.style)},[_c('div',{staticClass:\"camera-control\"},[_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.cameraon),expression:\"!cameraon\"}],staticClass:\"camera-btn\",on:{\"click\":_vm.cameraOn}},[_vm._v(\"打开摄像头\")]),_vm._v(\" \"),(_vm.cameraon)?_c('button',{staticClass:\"camera-btn\",on:{\"click\":_vm.cameraOff}},[_vm._v(\"关闭摄像头\")]):_vm._e(),_vm._v(\" \"),(_vm.cameraon)?_c('button',{staticClass:\"camera-btn\",on:{\"click\":function($event){_vm.toCanvas('video')}}},[_vm._v(\"生成Canvas\")]):_vm._e()]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.cameraon),expression:\"!cameraon\"}],staticClass:\"camera-placement\",attrs:{\"slot\":\"placement\"},on:{\"click\":_vm.cameraOn},slot:\"placement\"},[_c('p',{staticClass:\"camera-placement-inner\"},[_vm._v(\"\\n        \"+_vm._s(_vm.msg)+\"\\n      \")])]),_vm._v(\" \"),_c('video',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.cameraon),expression:\"cameraon\"}],staticClass:\"camera-video\",style:(_vm.style)})]),_vm._v(\" \"),_c('div',{staticClass:\"canvas-main\",style:(_vm.style)},[_c('canvas',{staticClass:\"camera-canvas\",style:(_vm.style),attrs:{\"width\":_vm.ow,\"height\":_vm.oh}}),_vm._v(\" \"),_c('div',{staticClass:\"camera-canvas-group\"},_vm._l((_vm.canvasGroup),function(item){return _c('div',{staticClass:\"camera-canvas-item\",on:{\"click\":_vm.previewCanvas}},[_c('img',{attrs:{\"src\":item}})])}))])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.13.7.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-cf4f2676\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/.13.7.0@vue-loader/lib/selector.js?type=template&index=0!./src/camera.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/.3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/.13.7.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-cf4f2676\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../node_modules/.13.7.0@vue-loader/lib/selector?type=styles&index=0!./camera.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/.13.7.0@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/.13.7.0@vue-loader/lib/selector?type=script&index=0!./camera.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/.13.7.0@vue-loader/lib/selector?type=script&index=0!./camera.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/.13.7.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-cf4f2676\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/.13.7.0@vue-loader/lib/selector?type=template&index=0!./camera.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-cf4f2676\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/camera.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <Camera/>\n  </div>\n</template>\n\n<script>\nimport Camera from '@/camera'\n\nexport default {\n  name: 'app',\n  components: {\n    Camera\n  }\n}\n</script>\n\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// demo/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('Camera')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.13.7.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-3f9d903b\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/.13.7.0@vue-loader/lib/selector.js?type=template&index=0!./demo/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/.3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/.13.7.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3f9d903b\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/.13.7.0@vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/.13.7.0@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/.13.7.0@vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/.13.7.0@vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/.13.7.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3f9d903b\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/.13.7.0@vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demo/App.vue\n// module id = null\n// module chunks = ","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demo/main.js\n// module id = null\n// module chunks = "],"sourceRoot":""}